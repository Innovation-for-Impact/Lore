#!/bin/bash

set -Eeuo pipefail

echo "====================="
echo "This script initializes a test Postgresql database with a privledge 'myuser' with password 'mypass'"
echo "====================="

sudo apt-get install postgresql postgresql-contrib
sudo apt-get install libpq-dev python3-dev

sudo -u postgres psql <<EOF
\x
CREATE DATABASE mydb;
CREATE USER myuser WITH ENCRYPTED PASSWORD 'mypass';
ALTER ROLE myuser SET client_encoding TO 'utf8';
ALTER ROLE myuser SET default_transaction_isolation TO 'read committed';
ALTER ROLE myuser SET timezone TO 'UTC';
GRANT postgres TO myuser;
EOF
